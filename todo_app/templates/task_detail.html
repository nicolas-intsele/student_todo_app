{% extends 'base.html' %}

{% block title %}{{ task.title }} - TODO App{% endblock %}

{% block extra_css %}
<style>
    .task-detail {
        max-width: 700px;
        margin: 0 auto;
    }

    .task-detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 2px solid #e9ecef;
    }

    .back-link {
        color: #667eea;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 5px;
        font-weight: 600;
    }

    .back-link:hover {
        color: #764ba2;
    }

    .task-detail-card {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 30px;
        margin-bottom: 20px;
    }

    .task-detail-title {
        font-size: 2em;
        color: #333;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .status-indicator {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: inline-block;
    }

    .status-completed {
        background: #28a745;
    }

    .status-pending {
        background: #ffc107;
    }

    .task-detail-section {
        margin-bottom: 25px;
    }

    .section-label {
        font-weight: 600;
        color: #6c757d;
        font-size: 0.9em;
        text-transform: uppercase;
        margin-bottom: 8px;
        display: block;
    }

    .section-content {
        color: #333;
        font-size: 1.1em;
        line-height: 1.6;
        padding: 15px;
        background: white;
        border-radius: 5px;
        border-left: 4px solid #667eea;
    }

    .task-meta-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .meta-item {
        background: white;
        padding: 15px;
        border-radius: 8px;
        border: 2px solid #e9ecef;
    }

    .meta-icon {
        font-size: 1.5em;
        margin-bottom: 8px;
    }

    .meta-label {
        font-size: 0.85em;
        color: #6c757d;
        margin-bottom: 5px;
    }

    .meta-value {
        font-size: 1.1em;
        color: #333;
        font-weight: 600;
    }

    .action-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 2px solid #e9ecef;
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9em;
    }

    .status-badge.completed {
        background: #d4edda;
        color: #155724;
    }

    .status-badge.pending {
        background: #fff3cd;
        color: #856404;
    }

    .empty-content {
        color: #6c757d;
        font-style: italic;
    }
</style>
{% endblock %}

{% block content %}
<div class="task-detail">
    <div class="task-detail-header">
        <a href="{% url 'task_list' %}" class="back-link">
            ‚Üê Back to Tasks
        </a>
        <span class="status-badge {% if task.completed %}completed{% else %}pending{% endif %}">
            <span class="status-indicator {% if task.completed %}status-completed{% else %}status-pending{% endif %}"></span>
            {% if task.completed %}Completed{% else %}Pending{% endif %}
        </span>
    </div>

    <div class="task-detail-card">
        <h1 class="task-detail-title">
            {{ task.title }}
        </h1>

        {% if task.description %}
        <div class="task-detail-section">
            <span class="section-label">Description</span>
            <div class="section-content">
                {{ task.description|linebreaks }}
            </div>
        </div>
        {% else %}
        <div class="task-detail-section">
            <span class="section-label">Description</span>
            <div class="section-content empty-content">
                No description provided
            </div>
        </div>
        {% endif %}

        <div class="task-meta-grid">
            {% if task.due_date %}
            <div class="meta-item">
                <div class="meta-icon">üìÖ</div>
                <div class="meta-label">Due Date</div>
                <div class="meta-value">{{ task.due_date|date:"F d, Y" }}</div>
            </div>
            {% endif %}

            {% if task.due_time %}
            <div class="meta-item">
                <div class="meta-icon">üïê</div>
                <div class="meta-label">Due Time</div>
                <div class="meta-value">{{ task.due_time|time:"h:i A" }}</div>
            </div>
            {% endif %}

            {% if not task.due_date and not task.due_time %}
            <div class="meta-item">
                <div class="meta-icon">üìå</div>
                <div class="meta-label">Due Date</div>
                <div class="meta-value empty-content">No deadline set</div>
            </div>
            {% endif %}

            <div class="meta-item">
                <div class="meta-icon">üìä</div>
                <div class="meta-label">Status</div>
                <div class="meta-value">
                    {% if task.completed %}‚úì Completed{% else %}‚óã In Progress{% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="action-buttons">
        {% if not task.completed %}
        <form method="post" action="{% url 'task_toggle' task.id %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-success">‚úì Mark as Complete</button>
        </form>
        {% else %}
        <form method="post" action="{% url 'task_toggle' task.id %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-secondary">‚óã Mark as Incomplete</button>
        </form>
        {% endif %}

        <a href="{% url 'task_update' task.id %}" class="btn btn-primary">Edit Task</a>

        <form method="post" action="{% url 'task_delete' task.id %}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this task?');">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Delete Task</button>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Add any JavaScript functionality here if needed
    console.log('Task detail page loaded');
</script>
{% endblock %}